{"remainingRequest":"C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\src\\components\\shop\\ActivityList.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\src\\components\\shop\\ActivityList.vue","mtime":1723450789147},{"path":"C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709293572000},{"path":"C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1709293572000},{"path":"C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709293572000},{"path":"C:\\Users\\ADMIN\\Desktop\\MiniProgram\\微信小程序-心理资讯\\psychology_admin_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1709293572000}],"contextDependencies":[],"result":["\r\nexport default {\r\n    data() {\r\n        return {\r\n            isAdd: true, // 是否为新增活动推送 默认是\r\n            isModal: false, // 控制对话框的显示与隐藏\r\n            formSource: {\r\n                id: null, // 活动id\r\n                activity_name: '', // 活动名称\r\n                activity_con: '', // 活动内容\r\n                activity_time: '', // 活动时间\r\n                activity_address: '', // 活动地址\r\n                activity_tips: '', // 活动注意事项\r\n            }, // 表单数据\r\n            rules: {\r\n                activity_name: [{\r\n                    required: true,\r\n                    message: '活动标题不能为空!',\r\n                    trigger: 'blur'\r\n                }],\r\n                activity_con: [{\r\n                    required: true,\r\n                    message: '活动内容不能为空',\r\n                    trigger: 'blur'\r\n                }],\r\n                activity_time: [{\r\n                    required: true,\r\n                    message: '活动时间不能为空',\r\n                    trigger: 'change'\r\n                }],\r\n                activity_address: [{\r\n                    required: true,\r\n                    message: '活动地址不能为空',\r\n                    trigger: 'blur'\r\n                }],\r\n                activity_tips: [{\r\n                    required: true,\r\n                    message: '活动注意事项不能为空',\r\n                    trigger: 'blur'\r\n                }]\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        this.getClassList() // 获取活动推送\r\n    },\r\n    methods: {\r\n        // 获取活动推送\r\n        async getClassList() {\r\n            const {\r\n                data: res\r\n            } = await this.$http.post('getActivity', {})\r\n            if (res.status === 200) {\r\n                this.tableList = res.data\r\n            } else {\r\n                this.$message.error(res.msg)\r\n            }\r\n        },\r\n        // 打开弹框\r\n        openModal(type, data) {\r\n            this.isAdd = type\r\n            this.isModal = true\r\n            if (!type) {\r\n                // 如果是编辑 那么拿一下编辑的内容\r\n                this.formSource = JSON.parse(JSON.stringify(data))\r\n            }\r\n        },\r\n        // 提交表单\r\n        async submitForm() {\r\n            this.$refs.formSourceRef.validate(async (valid) => {\r\n                if (valid) {\r\n                    await this.setClass();\r\n                } else {\r\n                    this.$message.error('请检查表单内容');\r\n                }\r\n            });\r\n        },\r\n        // 修改活动推送\r\n        async setClass() {\r\n\r\n            if (this.isAdd) {\r\n                // 新增活动推送\r\n                const {\r\n                    data: res\r\n                } = await this.$http.post('addActivity', {\r\n                    ...this.formSource,\r\n                    activity_time: this.$moment(this.formSource.activity_time).format('YYYY/MM/DD')\r\n                })\r\n                if (res.status === 200) {\r\n                    this.isModal = false\r\n                    this.getClassList()\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            } else {\r\n                // 修改活动推送\r\n                const {\r\n                    data: res\r\n                } = await this.$http.post('updateActivity', {\r\n                    ...this.formSource,\r\n                    activity_time: this.$moment(this.formSource.activity_time).format('YYYY/MM/DD')\r\n                })\r\n                if (res.status === 200) {\r\n                    this.isModal = false\r\n                    this.getClassList()\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            }\r\n        },\r\n        // 删除活动推送\r\n        removeClass(data) {\r\n            this.$confirm('此操作将无法恢复, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning',\r\n                })\r\n                .then(async () => {\r\n                    const {\r\n                        data: res\r\n                    } = await this.$http.post('delActivity', {\r\n                        id: data.id\r\n                    })\r\n                    if (res.status === 200) {\r\n                        this.getClassList()\r\n                    } else {\r\n                        this.$message.error(res.msg)\r\n                    }\r\n                })\r\n                .catch(() => {})\r\n        },\r\n\r\n        // 关闭修改对话框\r\n        closeModal() {\r\n            this.formSource = {\r\n                id: null, // 活动id\r\n                activity_name: '', // 活动名称\r\n                activity_con: '', // 活动内容\r\n                activity_time: '', // 活动时间\r\n                activity_address: '', // 活动地址\r\n                activity_tips: '', // 活动注意事项\r\n            }\r\n            this.$refs.formSourceRef.resetFields()\r\n        },\r\n    },\r\n}\r\n",{"version":3,"sources":["ActivityList.vue"],"names":[],"mappings":";AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ActivityList.vue","sourceRoot":"src/components/shop","sourcesContent":["<template>\r\n<div class=\"list\">\r\n    <!-- 面包屑导航区域 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>活动推送管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n        <el-button type=\"primary\" @click=\"openModal(true)\">新增活动推送</el-button>\r\n        <!-- 活动推送列表区域 -->\r\n        <el-table :data=\"tableList\" border stripe>\r\n            <el-table-column label=\"序号\" type=\"index\"></el-table-column>\r\n            <el-table-column label=\"活动标题\" prop=\"activity_name\"></el-table-column>\r\n            <el-table-column label=\"活动内容\" prop=\"activity_con\"></el-table-column>\r\n            <el-table-column label=\"活动时间\" prop=\"activity_time\"></el-table-column>\r\n            <el-table-column label=\"活动地址\" prop=\"activity_address\"></el-table-column>\r\n            <el-table-column label=\"活动注意事项\" prop=\"activity_tips\"></el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150px\">\r\n                <template slot-scope=\"scope\">\r\n                    <!-- 修改按钮 -->\r\n                    <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"openModal(false,scope.row)\"></el-button>\r\n                    <!-- 删除按钮 -->\r\n                    <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeClass(scope.row)\"></el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </el-card>\r\n\r\n    <!-- 新增 & 修改活动推送内容区域 -->\r\n    <el-dialog :title=\"isAdd ? '新增活动推送' : '修改活动推送'\" :visible.sync=\"isModal\" width=\"66%\" @close=\"closeModal\">\r\n        <el-form :model=\"formSource\" ref=\"formSourceRef\" label-width=\"auto\" :rules=\"rules\">\r\n            <el- -item label=\"活动标题\" label-width=\"160px\" prop=\"activity_name\" required>\r\n                <el-input v-model=\"formSource.activity_name\"></el-input>\r\n            </el->\r\n            <el-form-item label=\"活动内容\" prop=\"activity_con\" label-width=\"160px\" required>\r\n                <el-input type=\"textarea\" v-model=\"formSource.activity_con\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"活动时间\" prop=\"activity_time\" label-width=\"160px\" required>\r\n                <el-date-picker v-model=\"formSource.activity_time\" type=\"date\">\r\n                </el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"活动地址\" prop=\"activity_address\" label-width=\"160px\" required>\r\n                <el-input v-model=\"formSource.activity_address\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"活动注意事项\" prop=\"activity_tips\" label-width=\"160px\" required>\r\n                <el-input type=\"textarea\" v-model=\"formSource.activity_tips\"></el-input>\r\n            </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        </span>\r\n    </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            isAdd: true, // 是否为新增活动推送 默认是\r\n            isModal: false, // 控制对话框的显示与隐藏\r\n            formSource: {\r\n                id: null, // 活动id\r\n                activity_name: '', // 活动名称\r\n                activity_con: '', // 活动内容\r\n                activity_time: '', // 活动时间\r\n                activity_address: '', // 活动地址\r\n                activity_tips: '', // 活动注意事项\r\n            }, // 表单数据\r\n            rules: {\r\n                activity_name: [{\r\n                    required: true,\r\n                    message: '活动标题不能为空!',\r\n                    trigger: 'blur'\r\n                }],\r\n                activity_con: [{\r\n                    required: true,\r\n                    message: '活动内容不能为空',\r\n                    trigger: 'blur'\r\n                }],\r\n                activity_time: [{\r\n                    required: true,\r\n                    message: '活动时间不能为空',\r\n                    trigger: 'change'\r\n                }],\r\n                activity_address: [{\r\n                    required: true,\r\n                    message: '活动地址不能为空',\r\n                    trigger: 'blur'\r\n                }],\r\n                activity_tips: [{\r\n                    required: true,\r\n                    message: '活动注意事项不能为空',\r\n                    trigger: 'blur'\r\n                }]\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        this.getClassList() // 获取活动推送\r\n    },\r\n    methods: {\r\n        // 获取活动推送\r\n        async getClassList() {\r\n            const {\r\n                data: res\r\n            } = await this.$http.post('getActivity', {})\r\n            if (res.status === 200) {\r\n                this.tableList = res.data\r\n            } else {\r\n                this.$message.error(res.msg)\r\n            }\r\n        },\r\n        // 打开弹框\r\n        openModal(type, data) {\r\n            this.isAdd = type\r\n            this.isModal = true\r\n            if (!type) {\r\n                // 如果是编辑 那么拿一下编辑的内容\r\n                this.formSource = JSON.parse(JSON.stringify(data))\r\n            }\r\n        },\r\n        // 提交表单\r\n        async submitForm() {\r\n            this.$refs.formSourceRef.validate(async (valid) => {\r\n                if (valid) {\r\n                    await this.setClass();\r\n                } else {\r\n                    this.$message.error('请检查表单内容');\r\n                }\r\n            });\r\n        },\r\n        // 修改活动推送\r\n        async setClass() {\r\n\r\n            if (this.isAdd) {\r\n                // 新增活动推送\r\n                const {\r\n                    data: res\r\n                } = await this.$http.post('addActivity', {\r\n                    ...this.formSource,\r\n                    activity_time: this.$moment(this.formSource.activity_time).format('YYYY/MM/DD')\r\n                })\r\n                if (res.status === 200) {\r\n                    this.isModal = false\r\n                    this.getClassList()\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            } else {\r\n                // 修改活动推送\r\n                const {\r\n                    data: res\r\n                } = await this.$http.post('updateActivity', {\r\n                    ...this.formSource,\r\n                    activity_time: this.$moment(this.formSource.activity_time).format('YYYY/MM/DD')\r\n                })\r\n                if (res.status === 200) {\r\n                    this.isModal = false\r\n                    this.getClassList()\r\n                } else {\r\n                    this.$message.error(res.msg)\r\n                }\r\n            }\r\n        },\r\n        // 删除活动推送\r\n        removeClass(data) {\r\n            this.$confirm('此操作将无法恢复, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning',\r\n                })\r\n                .then(async () => {\r\n                    const {\r\n                        data: res\r\n                    } = await this.$http.post('delActivity', {\r\n                        id: data.id\r\n                    })\r\n                    if (res.status === 200) {\r\n                        this.getClassList()\r\n                    } else {\r\n                        this.$message.error(res.msg)\r\n                    }\r\n                })\r\n                .catch(() => {})\r\n        },\r\n\r\n        // 关闭修改对话框\r\n        closeModal() {\r\n            this.formSource = {\r\n                id: null, // 活动id\r\n                activity_name: '', // 活动名称\r\n                activity_con: '', // 活动内容\r\n                activity_time: '', // 活动时间\r\n                activity_address: '', // 活动地址\r\n                activity_tips: '', // 活动注意事项\r\n            }\r\n            this.$refs.formSourceRef.resetFields()\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"]}]}